<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nida ğŸ’—</title>
<style>
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto;
  background:linear-gradient(135deg,#ffd6e8,#ffeef6);
}
.chat-container{
  max-width:420px;
  margin:auto;
  padding:10px;
}
.chat-header{
  background:#ff4f9a;
  color:white;
  padding:14px;
  border-radius:14px 14px 0 0;
  text-align:center;
  font-weight:600;
}
.typing{font-size:12px;opacity:.9;text-align:center;margin-bottom:4px;}

.chat-box{
  background:#f7f7f7;
  min-height:220px;
  padding:10px;
  display:flex;
  flex-direction:column;
  border-radius:0 0 14px 14px;
  overflow-y:auto;
}

.message{
  max-width:75%;
  padding:10px 14px;
  margin:6px 0;
  border-radius:14px;
  font-size:14px;
  animation:pop .25s ease;
}
.from-nida{
  background:white;
  align-self:flex-start;
  border-top-left-radius:4px;
}
.from-you{
  background:#dcf8c6;
  align-self:flex-end;
  border-top-right-radius:4px;
}
@keyframes pop{
  from{transform:scale(.9);opacity:0}
  to{transform:scale(1);opacity:1}
}

.btn{
  margin-top:10px;
  width:100%;
  padding:12px;
  border:none;
  border-radius:25px;
  background:#ff4f9a;
  color:white;
  font-weight:600;
  cursor:pointer;
}

.quiz{
  background:white;
  margin-top:14px;
  padding:14px;
  border-radius:14px;
  font-size:14px;
}
.quiz button{
  margin-top:8px;
  width:100%;
  padding:10px;
  border:none;
  border-radius:10px;
  background:#ff85b6;
  color:white;
  cursor:pointer;
}

.score{margin-top:8px;font-weight:bold}
.comment{margin-top:6px;opacity:.85}

.confetti{
  position:fixed;
  top:-10px;
  width:8px;
  height:8px;
  animation:fall 2.5s linear forwards;
}
@keyframes fall{
  to{transform:translateY(110vh) rotate(360deg);opacity:0}
}
</style>
</head>
<body>
<div class="chat-container">
  <div class="chat-header">
    Nida ğŸ’—
    <div class="typing" id="typing">Ã§evrimiÃ§i</div>
  </div>
  <div class="chat-box" id="chatBox"></div>
  <button class="btn" onclick="sendMessage()">Mesaj GÃ¶nder</button>
  <div class="quiz">
    <b id="quizQuestion">Mini Quiz ğŸ¯</b>
    <div id="quizOptions"></div>
    <div class="score" id="score"></div>
    <div class="comment" id="comment"></div>
  </div>
</div>

<script>
// WhatsApp tarzÄ± kÄ±sa pop sesi
const msgSound = new Audio("https://actions.google.com/sounds/v1/cartoon/pop.ogg");

// Nida'nÄ±n mesaj havuzu
const nidaMessages = [
 "canÄ±m benim ğŸ’—",
 "bitanem ya",
 "hayatÄ±m ğŸ˜Œ",
 "eÅŸÅŸÅŸek kuzum benimm ğŸ˜„",
 "bak yine gÃ¼lÃ¼yorum sana",
 "Ã§ok tatlÄ± oluyosun farkÄ±nda mÄ±sÄ±n",
 "hatunum deme demiÅŸtim ama yakÄ±ÅŸÄ±yo ğŸ˜",
 "ya ciddiyim seviyorum seni",
 "konuÅŸma azÄ±cÄ±k ama yanÄ±mda ol",
 "ÅŸapÅŸal ÅŸey ğŸ˜‚",
 "kalbimi alÄ±p kaÃ§tÄ±n haberin olsun"
];
let usedNida=[];

// KullanÄ±cÄ±nÄ±n mesaj havuzu
const userMessages = [
 "Ã‡ooook seviyorum ğŸ˜",
 "Seni Ã¶zledim ğŸ’•",
 "Bitanem â¤ï¸",
 "CanÄ±m benim ğŸ˜˜",
 "HayatÄ±m ğŸ˜Œ",
 "GÃ¼lÃ¼m ğŸ˜„"
];

// Mesaj gÃ¶nderme fonksiyonu
function sendMessage(){
  // Senin mesajÄ±n
  let userMsg = userMessages[Math.floor(Math.random()*userMessages.length)];
  appendMessage(userMsg,'from-you');

  // Nida mesajÄ± 700ms sonra
  setTimeout(()=>{
    if(usedNida.length === nidaMessages.length) usedNida=[];
    let pool = nidaMessages.filter(m=>!usedNida.includes(m));
    let nidaMsg = pool[Math.floor(Math.random()*pool.length)];
    usedNida.push(nidaMsg);
    appendMessage(nidaMsg,'from-nida');
  },700);
}

// Mesaj ekleme yardÄ±mcÄ± fonksiyonu
function appendMessage(text,className){
  const div = document.createElement("div");
  div.className = "message "+className;
  div.innerText = text;
  document.getElementById("chatBox").appendChild(div);
  msgSound.currentTime=0;
  msgSound.play().catch(()=>{});
  scrollChat();
}

// Chat otomatik kaydÄ±r
function scrollChat(){
  const chat=document.getElementById("chatBox");
  chat.scrollTop = chat.scrollHeight;
}

// Quiz 6 soruluk
const quiz=[
 {q:"Ben sana en Ã§ok ne diyorum?",o:["CanÄ±m","Hatunum","TatlÄ±m","AÅŸkÄ±m"],c:1},
 {q:"Sevgi dozajÄ±m?",o:["Az","Normal","Ã‡oook","Belli deÄŸil"],c:2},
 {q:"Beni kÄ±zdÄ±ran ÅŸey?",o:["Trip","Sessizlik","SoÄŸukluk","Hepsi"],c:3},
 {q:"Bana en Ã§ok yakÄ±ÅŸan?",o:["Ciddi","Cool","ÅapÅŸal","Hepsi"],c:3},
 {q:"En sevdiÄŸim emoji?",o:["ğŸ˜‚","ğŸ˜","ğŸ˜","ğŸ˜Œ"],c:1},
 {q:"Ben sana hangi kelimeyi sÄ±k kullanÄ±rÄ±m?",o:["Bitanem","HayatÄ±m","CanÄ±m","Hepsi"],c:3}
];
let qi=0,score=0;

function loadQuiz(){
  const q=quiz[qi];
  document.getElementById("quizQuestion").innerText=q.q;
  const box=document.getElementById("quizOptions");
  box.innerHTML="";
  q.o.forEach((x,i)=>{
    const b=document.createElement("button");
    b.innerText=x;
    b.onclick=()=>{
      if(i===q.c) score++;
      qi++;
      if(qi<quiz.length) loadQuiz();
      else finishQuiz();
      updateScore();
    };
    box.appendChild(b);
  });
  updateScore();
}

function updateScore(){
  document.getElementById("score").innerText=`Skor: ${score}/${quiz.length}`;
}

function finishQuiz(){
  const percent=Math.round(score/quiz.length*100);
  const t = percent>=75?"Beni baya tanÄ±yorsun ğŸ˜„":"Fena deÄŸil ama Ã§alÄ±ÅŸÄ±lÄ±r ğŸ˜";
  document.getElementById("comment").innerText=`Beni %${percent} tanÄ±yor. ${t}`;
  confetti();
}

loadQuiz();

// Konfeti
function confetti(){
  for(let i=0;i<70;i++){
    const c=document.createElement("div");
    c.className="confetti";
    c.style.left=Math.random()*100+"vw";
    c.style.background=`hsl(${Math.random()*360},80%,60%)`;
    document.body.appendChild(c);
    setTimeout(()=>c.remove(),2500);
  }
}

// AÃ§Ä±lÄ±ÅŸta 2 Nida mesajÄ±
window.addEventListener('load',()=>{
  setTimeout(sendMessage,400);
  setTimeout(sendMessage,1200);
});
</script>
</body>
</html>
